@tailwind base;
@tailwind components;
@tailwind utilities;

/* iOS safe area support */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .pb-safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  .pb-safe-top {
    padding-top: env(safe-area-inset-top);
  }
  .pt-safe-top {
    padding-top: env(safe-area-inset-top);
  }
}

/* iOS app - proper spacing for notch and home indicator */
body.ios-app {
  padding-top: env(safe-area-inset-top, 0px);
}

/* Design system: all colors in HSL numeric form (no hsl() wrapper here). */

@layer base {
  :root {
    /* ---------- Light (Neutral Beige) ---------- */

    /* Base */
    --background: 40 30% 96%;           /* parchment */
    --foreground: 30 25% 20%;           /* espresso text */

    /* Surfaces */
    --card: 40 30% 98%;
    --card-foreground: 30 25% 20%;
    --popover: 40 30% 98%;
    --popover-foreground: 30 25% 20%;

    /* Brand */
    --primary: 30 40% 35%;              /* warm leather brown */
    --primary-foreground: 0 0% 100%;

    /* Secondary / neutrals */
    --secondary: 40 20% 85%;            /* soft tan */
    --secondary-foreground: 30 25% 20%;

    /* Muted text & fills */
    --muted: 40 15% 88%;
    --muted-foreground: 30 15% 40%;

    /* Accent (very soft sand) */
    --accent: 60 20% 80%;
    --accent-foreground: 30 25% 20%;

    /* Status */
    --destructive: 0 65% 40%;
    --destructive-foreground: 0 0% 100%;

    /* UI tokens */
    --border: 40 20% 85%;
    --input: 40 20% 90%;
    --ring: 30 40% 35%;

    /* ReadReceipt progress/gradients */
    --reading-pink: 35 30% 70%;         /* repurposed as warm beige accent */
    --reading-red: 30 40% 35%;          /* aligns with --primary */
    --progress-start: 35 30% 70%;
    --progress-end: 30 40% 35%;

    /* Gradients */
    --gradient-primary: linear-gradient(
      135deg,
      hsl(var(--progress-start)),
      hsl(var(--progress-end))
    );
    --gradient-soft: linear-gradient(
      180deg,
      hsl(var(--background)),
      hsl(var(--accent))
    );

    /* Shadows */
    --shadow-soft: 0 2px 20px -5px hsl(var(--primary) / 0.15);
    --shadow-card: 0 4px 30px -10px hsl(var(--primary) / 0.2);

    /* Radius */
    --radius: 0.5rem;

    /* Sidebar (if used) */
    --sidebar-background: 40 30% 96%;
    --sidebar-foreground: 30 25% 20%;
    --sidebar-primary: 30 40% 35%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 40 20% 85%;
    --sidebar-accent-foreground: 30 25% 20%;
    --sidebar-border: 40 20% 85%;
    --sidebar-ring: 30 40% 35%;
  }

  .dark {
    /* ---------- Dark (Dark-Academia) ---------- */

    /* Base */
    --background: 24 15% 12%;           /* deep cocoa */
    --foreground: 35 30% 92%;           /* warm paper */

    /* Surfaces */
    --card: 24 15% 14%;
    --card-foreground: 35 30% 92%;
    --popover: 24 15% 14%;
    --popover-foreground: 35 30% 92%;

    /* Brand */
    --primary: 28 40% 60%;              /* amber leather */
    --primary-foreground: 24 15% 12%;

    /* Secondary */
    --secondary: 28 12% 18%;
    --secondary-foreground: 35 30% 92%;

    /* Muted */
    --muted: 28 12% 22%;
    --muted-foreground: 35 18% 70%;

    /* Accent */
    --accent: 90 10% 22%;               /* moss/olive shadow */
    --accent-foreground: 40 40% 92%;

    /* Status */
    --destructive: 0 55% 45%;
    --destructive-foreground: 0 0% 100%;

    /* UI tokens */
    --border: 28 12% 22%;
    --input: 28 12% 22%;
    --ring: 28 40% 60%;

    /* Sidebar */
    --sidebar-background: 24 15% 12%;
    --sidebar-foreground: 35 30% 92%;
    --sidebar-primary: 28 40% 60%;
    --sidebar-primary-foreground: 24 15% 12%;
    --sidebar-accent: 28 12% 18%;
    --sidebar-accent-foreground: 35 30% 92%;
    --sidebar-border: 28 12% 22%;
    --sidebar-ring: 28 40% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Utility classes that map to your design tokens */
@layer utilities {
  .bg-gradient-primary { background: var(--gradient-primary); }
  .bg-gradient-soft    { background: var(--gradient-soft); }
  .shadow-soft         { box-shadow: var(--shadow-soft); }
  .shadow-card         { box-shadow: var(--shadow-card); }
}

/* Hide top web header in native iOS app, WKWebView, or PWA standalone */
.ios-native-app header.bg-card { display: none !important; }
.ios-app header.bg-card { display: none !important; }
@media (display-mode: standalone) {
  header.bg-card { display: none !important; }
}
/* If the mobile tabbar exists, hide the header (robust fallback) */
body:has(nav[data-mobile-tabbar]) header.bg-card { display: none !important; }

